# UAVCrew MCP Gateway Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# AUTHENTICATION
# =============================================================================
# UAVCrew uses delegation JWTs (T1 tokens) signed with RS256.
# The gateway validates T1 using the public key (K3) from UAVCrew.
#
# When MCP_JWT_PUBLIC_KEY_PATH is set, the gateway validates T1 JWTs.
# K4 token resolution is configured in manifest.json (auth section):
#   static mode:  reads from env var (e.g., CLIENT_API_TOKEN)
#   dynamic mode: calls client resolver endpoint with T1 JWT

# Path to K3 public key (PEM) for validating T1 delegation JWTs from UAVCrew.
# Get K3 from UAVCrew: python manage.py generate_delegation_keypair
# MCP_JWT_PUBLIC_KEY_PATH=/etc/mcp-gateway/delegation_public.pem

# =============================================================================
# LEGACY AUTHENTICATION (deprecated â€” use JWT above)
# =============================================================================
# Static API key for authenticating requests from UAVCrew.
# Kept for backward compatibility during transition to T1 JWT auth.

# Single API key (for one UAVCrew instance)
MCP_API_KEY=

# Multiple API keys (comma-separated, for connecting to both dev and prod UAVCrew)
# MCP_API_KEYS=mcp_token_from_prod,mcp_token_from_dev

# Client API token (K4) for static auth mode.
# Used when manifest.json auth.mode = "static".
# For dynamic mode, K4 is resolved per-tenant via the resolver endpoint.
# CLIENT_API_TOKEN=

# =============================================================================
# CLIENT API
# =============================================================================
# Base URL of the client REST API that the gateway forwards requests to.
# The gateway appends entity paths from manifest.json to this URL.
# Examples: https://app.example.com/api/v1, http://localhost:8000/api/v1
# If not set, falls back to api_base_url in manifest.json.
CLIENT_API_BASE_URL=https://app.ayna.com/api/v1

# =============================================================================
# SERVER
# =============================================================================
# Server identity (shown in UAVCrew dashboard)
MCP_SERVER_NAME=MCP Gateway

# Public HTTPS URL where UAVCrew connects (behind reverse proxy)
MCP_PUBLIC_URL=https://mcp.example.com

# Host to bind to (127.0.0.1 for behind reverse proxy, 0.0.0.0 for all interfaces)
MCP_HOST=127.0.0.1

# Port to listen on
MCP_PORT=8200

# =============================================================================
# LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
