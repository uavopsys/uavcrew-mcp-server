# UAVCrew MCP Gateway Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# DATABASE
# =============================================================================
# Uncomment and configure ONE of the following based on your database.
# Install the required driver: pip install uavcrew-mcp-gateway[postgresql]

# SQLite (for development/testing - no driver needed)
DATABASE_URL=sqlite:///./compliance.db

# PostgreSQL (pip install uavcrew-mcp-gateway[postgresql])
# DATABASE_URL=postgresql://user:password@localhost:5432/compliance_db

# MySQL / MariaDB (pip install uavcrew-mcp-gateway[mysql])
# DATABASE_URL=mysql+pymysql://user:password@localhost:3306/compliance_db

# Microsoft SQL Server (pip install uavcrew-mcp-gateway[sqlserver])
# DATABASE_URL=mssql+pyodbc://user:password@localhost/compliance_db?driver=ODBC+Driver+17+for+SQL+Server

# Oracle (pip install uavcrew-mcp-gateway[oracle])
# DATABASE_URL=oracle+oracledb://user:password@localhost:1521/compliance_db

# =============================================================================
# AUTHENTICATION
# =============================================================================
# UAVCrew uses delegation JWTs (T1 tokens) signed with RS256.
# The gateway validates T1 using the public key (K3) from UAVCrew.
#
# When MCP_JWT_PUBLIC_KEY_PATH is set, the gateway validates T1 JWTs and
# resolves tenant-scoped API tokens (K4) from the tenant database.
# When empty, falls back to legacy MCP_API_KEY authentication.

# Path to K3 public key (PEM) for validating T1 delegation JWTs from UAVCrew.
# Get K3 from UAVCrew: python manage.py generate_delegation_keypair
# MCP_JWT_PUBLIC_KEY_PATH=/etc/mcp-gateway/delegation_public.pem

# Path to SQLite database for tenant_id → K4 token mapping.
# Each tenant needs a K4 API token registered here.
# Manage with: uavcrew tenants add/list/remove
# MCP_TENANT_DB_PATH=tenants.db

# =============================================================================
# LEGACY AUTHENTICATION (deprecated — use JWT above)
# =============================================================================
# Static API key for authenticating requests from UAVCrew.
# Kept for backward compatibility during transition to T1 JWT auth.

# Single API key (for one UAVCrew instance)
MCP_API_KEY=

# Multiple API keys (comma-separated, for connecting to both dev and prod UAVCrew)
# MCP_API_KEYS=mcp_token_from_prod,mcp_token_from_dev

# Legacy: static token for all client API calls (replaced by per-tenant K4)
# CLIENT_API_TOKEN=

# =============================================================================
# SERVER
# =============================================================================
# Server identity (shown in UAVCrew dashboard)
MCP_SERVER_NAME=MCP Gateway

# Public HTTPS URL where UAVCrew connects (behind reverse proxy)
MCP_PUBLIC_URL=https://mcp.example.com

# Host to bind to (127.0.0.1 for behind reverse proxy, 0.0.0.0 for all interfaces)
MCP_HOST=127.0.0.1

# Port to listen on
MCP_PORT=8200

# =============================================================================
# STORAGE (MinIO / S3-compatible)
# =============================================================================
# Required for storage_* tools (storage_list, storage_get, etc.)
# Leave blank if not using storage tools.

# MinIO/S3 endpoint
# MINIO_ENDPOINT_URL=https://minio.example.com

# MinIO/S3 credentials
# MINIO_ACCESS_KEY=
# MINIO_SECRET_KEY=

# Bucket prefix for organization buckets (buckets named: {prefix}org-{uuid})
# MINIO_BUCKET_PREFIX=

# =============================================================================
# LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# =============================================================================
# DEVELOPMENT
# =============================================================================
# Seed demo data on startup (set to false in production)
SEED_DEMO_DATA=false
